= Concierge v1.4 - User Guide
:site-section: UserGuide
:toc:
:toc-title:
:toc-placement: preamble
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
:experimental:
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
endif::[]
:repoURL: https://github.com/CS2103-AY1819S1-F11-2/main

By: `Team SE-EDU`      Since: `Jun 2016`      Licence: `MIT`

== Introduction

Concierge is created for *hotel managers and receptionists* of small hotels looking for a simple application to *assist
the user in hotel management*. More importantly, Concierge is *optimized for those who prefer to work with a Command Line Interface*
(CLI) while still having the benefits of a Graphical User Interface (GUI). If you can type fast, Concierge can get your
hotel management tasks done faster than traditional GUI apps. Interested? Jump to the <<Quick Start>> to get started. Enjoy!

== Quick Start

.  Ensure you have Java version `9` or later installed in your Computer.
.  Download the latest `concierge.jar` link:{repoURL}/releases[here].
.  Copy the file to the folder you want to use as the home folder for your Concierge.
.  Double-click the file to start the app. The GUI should appear in a few seconds.
+
image::Ui.png[width="790"]
+
.  Type the command in the command box and press kbd:[Enter] to execute it. +
e.g. typing *`help`* and pressing kbd:[Enter] will open the help window.
.  Some example commands you can try:

* *`list -r`* : lists all rooms
* **`checkin`**`r/085` : checks in the first active booking of room 085
* *`exit`* : exits the app

.  Refer to <<Features>> for details of each command.

[[Terminology]]
== Terminology

====
*Some important things that you need to know before using Concierge*

** Room numbers must be a 3-digit number from 001 to 100. For example,
* 001, 050, 074, 100 are valid
* 000, 01, 99, 101 are invalid

** A `Booking` is...
* `Active` if its start and end date includes today's date, inclusively.
* `Upcoming` if its start date is strictly after today's date.
* `Expired` if its end date is strictly before today's date.
* `Outdated` if its start date is strictly before today's date.

** Date format: `d/M/y`
* `d` - Day can be 1 or 2 digits
* `M` - Month can be 1 or 2 digits
* `y` - Year can be 2 or 4 digits (if 2 digits, date is assumed to be in the current century)

** There are 2 guest lists:
* Checked-in guest list contains all the guests who are currently checked-in.
* Archived guest list contains all guests who have ever stayed in the hotel before.
* Since the possibility of returning guests exists, there is no need to synchronize the archived guest list.
(i.e. it is standalone).

====

[[Features]]
== Features

====
*Command Format*

* Words in `UPPER_CASE` are the parameters to be supplied by the user e.g. in `add n/NAME`, `NAME` is a parameter which can be used as `add n/John Doe`.
* Items in square brackets are optional e.g `n/NAME [t/TAG]` can be used as `n/John Doe t/friend` or as `n/John Doe`.
* Items with `…`​ after them can be used multiple times including zero times e.g. `[t/TAG]...` can be used as `{nbsp}` (i.e. 0 times), `t/friend`, `t/friend t/family` etc.
* Parameters can be in any order e.g. if the command specifies `n/NAME p/PHONE_NUMBER`, `p/PHONE_NUMBER n/NAME` is also acceptable.
====

=== Adding a guest: `add`

Adds a guest to the guest list for the purpose of assigning a room +
Format: `add n/NAME p/PHONE_NUMBER e/EMAIL [t/TAG] r/ROOM_NUMBER
from/START_DATE to/END_DATE`

[TIP]
A guest can have any number of tags (including 0)

****
* A guest can make an unlimited number of bookings with the hotel, as long as
the booking is valid.
* A guest can make a booking for however long he/ she wants.
* When adding a booking, the guest will *not* be added to the archived guest list or checked-in guest list.
His/ her information will be stored under his/ her booking in the room.
* Expired bookings cannot be added. [red]#Coming in v1.4#
****

[TIP]
A valid booking cannot clash with an existing booking. It must also have a
start date from today onwards.

 This command requires a login.

Example:

`add n/John Smith p/98765432 e/johnsmith@gmail.com t/VIP r/085 from/09/12/18 to/10/12/18`

Add a guest "John Smith" to room 085 for a period of stay from 09/12/18 to 10/12/18.

.Adding an active booking
image::AddCommand-userguide-active.png[width="800"]

.Adding an inactive booking (i.e. booking is in the future)
image::AddCommand-userguide-notactive.png[width="800"]

=== Adding a guest: `addx` [red]#Coming in v2.0#

Adds a guest to the guest list NOT for the purpose of assigning a room (perhaps add to archived guest list) +
Format: `addx n/NAME p/PHONE_NUMBER e/EMAIL [t/TAG]...`

Examples:
* `addx n/guest p/98765432 e/johntan@hotmail.com t/bro`

=== Check-in room: `checkin`

Checks in the room's first active booking.
[TIP]
Expired and upcoming bookings *cannot* be checked-in.

Upon checking in the room's first active booking, the guest who made the booking will be added to
the checked-in guest list. +
Format: `checkin r/ROOM_NUMBER`

 This command requires a login.

Examples:

* `checkin r/085` +
Checks in room 085, marks room 085's current booking as checked-in, and adds the guest who made the booking
to the checked-in guest list.

=== Checkout room: `checkout`

Checks out the room's first (i.e. earliest) booking, or its booking with the specified start date. +
[TIP]
A booking can be uniquely identified by its start date.
[TIP]
`checkout` 's intended use is the deletion of any booking.
 This means that you can delete a non-checked-in booking using `checkout`.

Depending on whether the guest still has other checked-in bookings, either of the following can occur: +

* If the guest does not have any other checked-in bookings, then he/she will be removed from the checked-in
guest list and added to the archived guest list.
* If the guest still has other checked-in bookings, he/she will *not* be removed from the checked-in guest list,
but will be added to the archived guest list.

Format: `checkout r/ROOM_NUMBER [from/START_DATE]`

 This command requires a login.

Examples:

* `checkout r/085` +
Checks out room 085 and the room's first booking.
* `checkout r/085 from/01/11/18`
Checks out the booking with start date 01/11/18 from room 085.

=== Reassigning a guest to another room : `reassign`

Reassigns a booking from one room to another.

** You can reassign a booking only if all of the following conditions are met:
* The new room is different from the original.
* Neither the booking nor any of the new room's bookings are expired.
* The booking does not overlap with any of the new room's bookings.
* If the booking ends the same day the new room's first booking starts, the new room's first booking cannot be checked-in.
* If the booking starts the same day the new room's first booking ends, the booking cannot be checked-in.

Format: `reassign r/ROOM_NUMBER from/START_DATE`

Examples:

* `reassign r/085 from/01/11/18 nr/086` +
Reassigns the booking with start date 01/11/18 in room 085 to room 086.

=== Editing a guest : `edit` [red]#Coming in v1.4#

Edits an existing guest in the guest list or room in the room list. +
Format: `edit [FLAG] [IDENTIFIERS] [NEW_VALUE]`

****
* First, specify the type of field you want to edit by using a FLAG.
* Next, specify the unique identifier of the field(s).
* Lastly, provide the new values of the field(s).
* When editing tags, the existing tags of the guest will be removed i.e adding of tags is not cumulative.
* You can remove all the guest's tags by typing `t/` without specifying any tags after it.
****

[TIP]
All new values must start with a prefix preceded by the character `n`. For example, new tag = `nt/`.

Flags for possible fields to edit:

* `-r` - room fields
* `-b` - booking period field
* `-g` - guest field

Identifiers:

* `r/` - room number
* `from/` - start date of a booking period
* `n/` - guest name
* `p/` - guest phone
* `e/` - guest email

New values:

* `nc/` - new room capacity
* `nt/` - new tag (both guest and room, replaces old tags)
* `nfrom/` - new start date of booking
* `nto/` - new end date of booking
* `nn/` - new guest name
* `np/` - new guest phone
* `ne/` - new guest email

Examples:

* `edit -r r/001 nc/1` +
Edits room 001's capacity to be 1

* `edit -r r/001 nt/vip nt/specialneeds` +
Edits room 001's tags to be `vip` and `specialneeds`

* `edit -r r/001 nc/2 nt/` +
Edits room 001's capacity to be 2 and clears all existing tags

* `edit -b r/001 from/05/11/18 nfrom/09/11/18` +
Edits room 001's booking that starts on 05/11/18 to start on 09/11/18.

* `edit -b r/001 from/05/11/18 nfrom/09/11/18 nto/11/11/18` +
Edits room 001's booking that starts on 05/11/18 to start on 09/11/18 and end on 11/11/18.

* `edit -g r/001 from/05/11/18 nn/Popo np/999 ne/popo@spf.com nt/vip` +
Edits the guest of the booking that starts from 05/11/18 in room 001 to have new name `Popo`, new phone `999`,
new email `popo@spf.com`, and new tag `vip`.

* `edit -g r/001 n/John p/123 nn/Popo np/999` +
Edits all guests with name `John` and phone number `123` in room 001 to have new name `Popo` and new phone `999`.

* `edit -g n/John e/john@john.com ne/phua@phua.com` +
Edits all guests with name `John` and email `john@john.com` in all rooms to have new email `phua@phua.com`.

//tag::find[]
=== Locating guests and rooms : `find`

Finds guests or rooms, depending on the input flag and the keyword filters.

Format: `find [flag] FILTERS`

****
* The search is case insensitive. e.g `hans` will match `Hans`
* The order of the keywords does not matter. e.g. `Hans Bo` will match `Bo Hans`
* Only full words will be matched e.g. `Han` will not match `Hans`
* Guests names and tags matching at least one keyword will be returned (i.e. `OR` search). e.g. `Hans Bo` will return `Hans Gruber`, `Bo Yang`
* Any number of filters can be chained and used together
****

Filters for Guest (-g):

* `n/ - Name`
* `p/ - Phone Number`
* `e/ - Email Address`
* `t/ - Tags`

Filters for Rooms (-r):

* `r/ - Room Number`
* `c/ - Capacity`
* `t/ - Room Tags`
* `n/ - Guest name within bookings`

* `-hb - Has Bookings Flag`*
* `-nb - No Bookings Flag`*
* `from/ - Booking Start Date`^
* `to/ - Booking End Date`^

[TIP]
Flags marked with * cannot be used together in the same command.
These flags can be used independently, or with flags marked with ^ . +
Input dates must be in DD/MM/YY or DD/MM/YYYY format.

Find Command Examples:

=======
* `find -g n/Alex Yu` +
Find guest(s) with "Alex" or "Yu" or both in their names.
* `find -g n/Alex t/VIP` +
Find guest(s) named Alex with tag "VIP".
* `find -g p/81027115` +
Find guest(s) with phone number "81027115".
* `find -r r/085` +
Find room 085
* `find -r c/2` +
Find all rooms with a capacity of 2.
* `find -r c/5 -nb from/ 01/11/2018 to/ 05/11/2018` +
Find all rooms with a capacity of 5, without any bookings from the date range 01/11/2018 to 05/11/2018.
* `find -r -hb` +
Find all rooms with bookings.
* `find -r -hb t/RoomService` +
Find all rooms with bookings with tag "RoomService".
=======

//end::find[]

// tag::list[]
=== Listing all guests : `list`

Shows the entire list of rooms, checked-in guests, or archived guests, depending on the input flag +
Format: `list [flag]`

Examples:

* `list -r` +
List all rooms
* `list -g` +
List all archived guests
* `list -cg` +
List all checked-in guests
// end::list[]

// tag::login[]
=== Login : `login`

Logs in to the Concierge application. +
Format: `login user/USERNAME pw/PASSWORD`

Note: The username and password are both case-sensitive.

[TIP]
A login allows the user to access the commands which can affect the
bookings.

****
* The default account can be accessed with `login user/admin pw/passw0rd`
* More users can be added at `src/data/passwords.json`. When adding passwords
to the reference list, be sure to add the SHA-256 hashed password.
You can find a useful hashing tool here: https://passwordsgenerator.net/sha256-hash-generator/
****

Commands which require login:

** `add` [red]#Coming in v2.0#
** `checkin`
** `checkout`
** `clear`
** `service` [red]#Coming in v2.0#

Example: `login user/damithz pw/forgotpassword`

.Without login, Concierge cannot be cleared
image::LogInCommand-notsignedin.png[width="400"]

.Login with a valid account
image::LogInCommand-loginsuccess.png[width="400"]

.`clear` command can now be executed
image::LogInCommand-clearsuccess.png[width="400"]

=== Logout : `logout`

Logs out of the Concierge application. +
Format: `logout`

image::LogOutCommand-success.png[width="400"]

****
* The special classes of commands (as documented in `login`) can no longer be
executed.
* The `logout` command will erase the command history, so users cannot undo/
redo commands executed before the logout.
** This is the same as closing and re-opening Concierge after a logout.
****

=== Selecting a guest : `select`

Selects the guest or room identified by the index number used in the displayed list. +
Format: `select INDEX`

****
* Selects the guest or room and displays its information in the detailed panel on the right.
* The index refers to the index number shown in the displayed list.
* The index *must be a positive integer* `1, 2, 3, ...`
****

Examples:

* `list -g` +
`select 2` +
Selects the 2nd guest in the displayed list.
* `list -r` +
`select 100` +
Selects the 100th room in the displayed list.

=== Provide Room Service: `service`

Charges a room service to a room  +
Format: `service r/ROOM_NUMBER no/ITEM_NUMBER [c/COST]`

****
* ITEM_NUMBER refers to the number in the menu given to each type of service offered by the hotel.
* This could be room service, on-demand video streaming, bath supplies, mini bar, etc.
* The cost can be specified as well, if the guest is to be charged an amount that is
  different from the cost in the menu. Note that the cost has to follow a strict format
  such as 100.00, i.e. with two decimal places. The dollar part of the cost should also
  not exceed `Integer.MAX_VALUE`.
* Any expenses added with this command will be accounted for under the Expenses portion
  of the respective rooms.
* Only occupied rooms (i.e. rooms with checked-in guests) can have expenses charged to it.
* The default `Menu` that comes with Concierge consists of the following items. Items
  may be modified, added, or removed through `concierge.xml`.
** *RS01* -- Room service: Red wine -- $50.00
** *RS02* -- Room service: Beef steak -- $70.00
** *RS03* -- Room service: Thai massage -- $100.00
** *MB01* -- Minibar: Coca cola -- $3.00
** *MB02* -- Minibar: Sprite -- $3.00
** *MB03* -- Minibar: Tiger beer -- $6.00
** *MB04* -- Minibar: Mineral water -- $3.00
** *SP01* -- Swimming pool: Entry -- $5.00
****

Examples:

* `service r/085 no/RS01` +
Adds an expenditure of the item *RS01* to the room's expenses.

* `service r/096 no/RS03 c/12.34` +
Adds an expenditure of the item *RS03* to the room's expenses and charge $12.34 for it.

=== Display menu: `menu` [red]#Coming in v1.4#

Displays the menu to help users in the use of the `service` command. +
Format: `menu`

=== Room maintenance: `maintenance` [red]#Coming in v2.0#

Sets the room to be under maintenance. +
Format: `maintenance ROOM_NUMBER TRUE/FALSE`

****
* A room under maintenance does not affect any of the other system operations.
* The receptionist should handle this situation on the ground using his judgment, be it to swap rooms for the guest
* or ask the guest to wait until the maintenance is over (e.g. leave luggage at hotel and talk a walk outside).
****

Examples:

* `maintenance 085 TRUE` +
Sets room 085 to be under maintenance.
* `maintenance 085 FALSE` +
Lifts the maintenance status on room 085.

=== Listing entered commands : `history`

Lists all the commands that you have entered in reverse chronological order. +
Format: `history`

[NOTE]
====
Pressing the kbd:[&uarr;] and kbd:[&darr;] arrows will display the previous and next input respectively in the command box.
====

// tag::undoredo[]
=== Undoing previous command : `undo`

Restores the concierge application to the state before the previous _undoable_ command was executed. +
Format: `undo`

[NOTE]
====
Undoable commands: those commands that modify Concierge's content (`add`, `checkin`, `checkout`, `delete`, `edit` and `clear`).
====

Examples:

* `delete 1` +
`list` +
`undo` (reverses the `delete 1` command) +

* `select 1` +
`list` +
`undo` +
The `undo` command fails as there are no undoable commands executed previously.

* `delete 1` +
`clear` +
`undo` (reverses the `clear` command) +
`undo` (reverses the `delete 1` command) +

=== Redoing the previously undone command : `redo`

Reverses the most recent `undo` command. +
Format: `redo`

Examples:

* `delete 1` +
`undo` (reverses the `delete 1` command) +
`redo` (reapplies the `delete 1` command) +

* `delete 1` +
`redo` +
The `redo` command fails as there are no `undo` commands executed previously.

* `delete 1` +
`clear` +
`undo` (reverses the `clear` command) +
`undo` (reverses the `delete 1` command) +
`redo` (reapplies the `delete 1` command) +
`redo` (reapplies the `clear` command) +
// end::undoredo[]

=== Clearing all entries : `clear`

Clears all entries from the application. +
Format: `clear`

This command requires a login.

The rooms are maintained - only all their current and future bookings are
cleared. I.e. all maintenance requests and faults will still be recorded.

.Empty room listing with all bookings deleted and expenses reset
image::ClearCommand-success.png[width="400"]

=== Export log: `export` [red]#Coming in v2.0#

Exports a log of all history of commands into a text file +
Format: `export`

=== Viewing help : `help`

Format: `help`

****
* Only one help session can be in place at each time.
* Your help session resets each time you close the window.
* Your help session is retained if the window is not closed.
****

=== Exiting the program : `exit`

Exits the program. +
Format: `exit`

=== Saving the data

Concierge data are saved in the hard disk automatically after any command that changes the data. +
There is no need to save manually.

// tag::dataencryption[]
=== Encrypting data files [red]#Coming in v2.0#

Encryption of Guests' personal data is still in the works. If you are
interested in contributing, please refer to the Developer Guide.
// end::dataencryption[]

== FAQ

*Q*: How do I transfer my data to another Computer? +
*A*: Install the app in the other computer and overwrite the empty data file it creates with the file that contains the data of your previous Concierge folder.

== Command Summary

* *Add a Guest and assign a Room* : `add n/NAME p/PHONE_NUMBER e/EMAIL
t/TAG r/ROOM_NUMBER from/START_DATE to/END_DATE`
* *Checkin* : `checkin r/ROOM_NUMBER`
* *Checkout* : `checkout r/ROOM_NUMBER [from/START_DATE]`
* *Edit* : `edit INDEX [n/NAME] [p/PHONE_NUMBER] [e/EMAIL] [t/TAG]...` [red]#Coming in v2.0#
* *Find* : `find KEYWORD [MORE_KEYWORDS]` [red]#Coming in v2.0#
* *List* : `list`
* *Login* : `login user/USERNAME pw/PASSWORD`
* *Logout* : `logout`
* *Select* : `select INDEX`
* *Room Service* : `service`
* *Mark Room as faulty* : `fault` [red]#Coming in v2.0#
* *History* : `history`
* *Undo* : `undo`
* *Redo* : `redo`
* *Clear* : `clear`
* *Export log* : `export` [red]#Coming in v2.0#
* *Help* : `help`
* *Exit* : `exit`
